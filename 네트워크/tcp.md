## TCP(Transmission Control Protocol)란?
* 서버와 클라이언트간 신뢰성있는 데이터를 전달하기 위해 만들어진 프로토콜이다.

## 3 way handshake
* 3 way handshake를 통해 연결을 한다.
1) 클라이언트가 서버에게 SYN(x)를 보낸다.
2) 서버는 SYN(x)를 받고 클라이언트에게 잘 받았다는 ACK(x+1)과 SYN(y)를 보낸다.
3) 클라이언트는 ACK(x+1)과 SYN(y)를 받고 잘 받았다는 ACK(y+1)를 보낸다.
![68747470733a2f2f6d656469612e6765656b73666f726765656b732e6f72672f77702d636f6e74656e742f75706c6f6164732f5443502d636f6e6e656374696f6e2d312e706e67](https://user-images.githubusercontent.com/41245313/146013862-047bf534-d544-4a77-8c2f-10d96ac32e4a.png)

## 4 way handshake
* 4 way handshake를 통해 연결해제를 한다.
1) 클라이언트가 연결을 종료하겠다는 FIN을 보낸다.
2) 서버는 FIN을 받고 클라이언트에게 잘 받았다는 ACK를 보내고 통신을 끝내기위해서 
CLOSE_WAIT 상태가 된다.
3) 서버의 통신이 끝나면 클라이언트에게 FIN을 보낸다.
4) 클라이언트는 FIN을 받고 서버가 FIN을 보내기 전에 보낸 데이터가 FIN 이후에 올 경우를 
대비하여 일정시간 TIME_WAIT 상태가 되고 끝나면 서버에게 잘 받았다는 ACK를 보내고 종료한다. 
서버는 ACK를 받고 종료한다.
![68747470733a2f2f6d656469612e6765656b73666f726765656b732e6f72672f77702d636f6e74656e742f75706c6f6164732f434e2e706e67](https://user-images.githubusercontent.com/41245313/146013970-665fba23-56a4-428f-a921-ea6a6f233e04.png)

## 흐름제어
* 송신측이 수신측보다 데이터 처리속도가 빠르다면 문제가 발생하므로 송신측에서 수신측에 따라
데이터 전송량을 조절 하는 것을 말한다.
* Stop And Wait : 매번 전송한 패킷에 대해서 응답이 받아야지 다음 패킷을 전송하는 방법
* Sliding Window : 3 way handshake 과정을 통해 송신측은 자신의 send window size를 
수신측의 receive window size에 맞춘다. 이후 window size만큼 응답없이 패킷을 한번에 보내고 
응답패킷을 받을때마다 윈도우를 옆으로 옮겨서 다음 패킷을 전송한다. 

## 혼잡제어
* 송신측의 데이터 전달속도와 네트워크의 데이터 처리속도 간 차이를 줄이기위해
데이터 전달속도를 줄이는 것을 말한다.
* 혼잡발생을 감지하는 방법으로는 timeout과 3 ACK Duplicated가 있다.
timeout은 송신측 패킷이나 수신측 패킷이 유실되어서 일정시간동안 응답을 받지 못하는 것을 
말한다. 3 ACK Duplicated는 송신측이 3번이상 중복된 승인번호를 받는 것을 말한다.
TCP는 가장 마지막 패킷에 대한 승인번호를 보내는 누적승인방식을 사용하기때문에 3번이상 중복된
승인번호를 받는다면 승인번호 이후의 패킷전송에 문제가 생긴것이다.
* Slow Start : 지수적으로 윈도우 크기를 증가시키고 혼잡발생시 윈도우 크기를 1로 줄인다.
* AIMD : 선형적으로 윈도우 크기를 증가시키고 혼잡발생시 윈도우 크기를 현재의 반으로 줄인다.
* TCP Reno : 처음에는 윈도우 크기를 지수적으로 증가시키다가 threshold를 만나면 윈도우 크기를
선형적으로 증가시킨다. 이후 첫번째로 3 ACK Duplicated가 발생하면 윈도우 크기를 현재의 절반으로 
줄이고 threshold도 절반으로 줄인다. 두번째로 timeout이 발생하면 윈도우 크기를 1로 줄인다.